<h4 id="check-the-current-kernel-version">check the current kernel version</h4>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">[</span>root@ServerA ~]# uname -r
2.6.32-358.el6.x86_64</code></pre></figure>

<p><br /></p>

<h4 id="download-new-kernel-source">download new kernel source</h4>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">[</span>root@ServerA ~]# wget https://www.kernel.org/pub/linux/kernel/v3.x/linux-3.12.tar.xz
<span class="o">[</span>root@ServerA ~]# tar xvfvJ linux-3.12.tar.xz -C /usr/src
<span class="o">[</span>root@ServerA ~]# <span class="nb">cd</span> /usr/src/linux-3.12/</code></pre></figure>

<p><br /></p>

<h4 id="install-additional-packages">install additional packages</h4>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">[</span>root@ServerA linux-3.12]# yum groupinstall <span class="s2">"Development Tools"</span>
<span class="o">[</span>root@ServerA linux-3.12]# yum install ncurses-devel
<span class="o">[</span>root@ServerA linux-3.12]# yum update</code></pre></figure>

<p><br /></p>

<h4 id="kernel-config-initialization">kernel config initialization</h4>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">[</span>root@ServerA linux-3.12]# <span class="nb">pwd</span>
/usr/src/linux-3.12
<span class="o">[</span>root@ServerA linux-3.12]# make mrproper
<span class="o">[</span>root@ServerA linux-3.12]# </code></pre></figure>

<p><br /></p>

<h4 id="kernel-configuration">kernel configuration</h4>

<ul>
  <li>
    <p>그래픽 환경에서는 # make xconfig 를 사용하면 되지만, 그래픽 환경을 사용하지 못하는 곳에서는 make menuconfig 를 사용하면 된다.</p>
  </li>
  <li>
    <p>그리고 기존 환경을 그대로 사용하고 싶다면 make oldconfig 를 이용하면 된다. oldconfig 를 할 때 여러가지 항목에 y/n/m 입력을 피하고 싶으면 (기존 설정 그대로 원한다면) 아래 command 로 실행해 주면 된다.</p>
  </li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># sh -c 'yes "" | make oldconfig' </span></code></pre></figure>

<ul>
  <li>위의 명령어로 기존과 동일하게 설정해보자.</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">[</span>root@ServerA linux-3.12]# sh -c <span class="s1">'yes "" | make oldconfig'</span></code></pre></figure>

<p><br /></p>

<h4 id="clean-old-config">clean old config</h4>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">[</span>root@ServerA linux-3.12]# make clean
<span class="o">[</span>root@ServerA linux-3.12]# </code></pre></figure>

<p><br /></p>

<h4 id="kernel-compile">kernel compile</h4>

<ul>
  <li>
    <p>make : 커널 컴파일 환경 설정대로 소스를 실제 컴파일 하는 과정</p>
  </li>
  <li>
    <p>make modules_install : 컴파일된 모듈을 /lib/modules/ 디렉토리에 설치하는 과정</p>
  </li>
  <li>
    <p>make install : 실제 컴파일된 커널을 /boot/ 디렉토리에 설치하는 과정</p>
  </li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">[</span>root@ServerA linux-3.12]#  make
<span class="o">[</span>root@ServerA linux-3.12]#  make modules_install
<span class="o">[</span>root@ServerA linux-3.12]#  make install</code></pre></figure>

<p><br /></p>

<h4 id="check-boot-loader">check boot loader</h4>

<p>/lib/modules 디렉토리와 /boot 디렉토리를 확인해 보면 새로운 커널 버전을 확인할 수 있다.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">[</span>root@ServerA ~]# ls -l /lib/modules/
total 16
drwxr-xr-x. 7 root root 4096 Nov 21 10:30 2.6.32-358.23.2.el6.x86_64
drwxr-xr-x. 8 root root 4096 Nov 13 23:47 2.6.32-358.el6.x86_64
drwxr-xr-x. 3 root root 4096 Nov 21 13:18 2.6.39
drwxr-xr-x. 3 root root 4096 Nov 22 17:45 3.12.0
<span class="o">[</span>root@ServerA ~]#
<span class="o">[</span>root@ServerA ~]# ls -l /boot
total 74540
-rw-r--r--. 1 root root   104112 Oct 17 04:01 config-2.6.32-358.23.2.el6.x86_64
-rw-r--r--. 1 root root   104081 Feb 22  2013 config-2.6.32-358.el6.x86_64
drwxr-xr-x. 3 root root     1024 Nov 12 08:26 efi
drwxr-xr-x. 2 root root     1024 Nov 22 17:45 grub
-rw-r--r--. 1 root root 16603681 Nov 21 10:30 initramfs-2.6.32-358.23.2.el6.x86_64.img
-rw-r--r--. 1 root root 16631249 Nov 13 23:48 initramfs-2.6.32-358.el6.x86_64.img
-rw-r--r--. 1 root root  4904840 Nov 21 13:18 initramfs-2.6.39.img
-rw-r--r--. 1 root root  5007188 Nov 22 17:45 initramfs-3.12.0.img
drwx------. 2 root root    12288 Nov 12 08:20 lost+found
-rw-r--r--. 1 root root   185978 Oct 17 04:02 symvers-2.6.32-358.23.2.el6.x86_64.gz
-rw-r--r--. 1 root root   185734 Feb 22  2013 symvers-2.6.32-358.el6.x86_64.gz
lrwxrwxrwx. 1 root root       23 Nov 22 17:45 System.map -&gt; /boot/System.map-3.12.0
-rw-r--r--. 1 root root  2408974 Oct 17 04:01 System.map-2.6.32-358.23.2.el6.x86_64
-rw-r--r--. 1 root root  2407466 Feb 22  2013 System.map-2.6.32-358.el6.x86_64
-rw-r--r--. 1 root root  2363469 Nov 21 13:18 System.map-2.6.39
-rw-r--r--. 1 root root  2363469 Nov 21 13:11 System.map-2.6.39.old
-rw-r--r--. 1 root root  2699213 Nov 22 17:45 System.map-3.12.0
lrwxrwxrwx. 1 root root       20 Nov 22 17:45 vmlinuz -&gt; /boot/vmlinuz-3.12.0
-rwxr-xr-x. 1 root root  4047152 Oct 17 04:01 vmlinuz-2.6.32-358.23.2.el6.x86_64
-rwxr-xr-x. 1 root root  4043888 Feb 22  2013 vmlinuz-2.6.32-358.el6.x86_64
-rw-r--r--. 1 root root  3930720 Nov 21 13:18 vmlinuz-2.6.39
-rw-r--r--. 1 root root  3930720 Nov 21 13:11 vmlinuz-2.6.39.old
-rw-r--r--. 1 root root  4359984 Nov 22 17:45 vmlinuz-3.12.0</code></pre></figure>

